{"remainingRequest":"E:\\ProgrammingLanguage\\git\\hacker_game\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\ProgrammingLanguage\\git\\hacker_game\\src\\app\\components\\room\\RoomStart.vue?vue&type=style&index=0&id=5412d995&lang=css","dependencies":[{"path":"E:\\ProgrammingLanguage\\git\\hacker_game\\src\\app\\components\\room\\RoomStart.vue","mtime":1655210360000},{"path":"E:\\ProgrammingLanguage\\git\\hacker_game\\node_modules\\css-loader\\dist\\cjs.js","mtime":1654422670000},{"path":"E:\\ProgrammingLanguage\\git\\hacker_game\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1654422688000},{"path":"E:\\ProgrammingLanguage\\git\\hacker_game\\node_modules\\postcss-loader\\src\\index.js","mtime":1654422676000},{"path":"E:\\ProgrammingLanguage\\git\\hacker_game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654422664000},{"path":"E:\\ProgrammingLanguage\\git\\hacker_game\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1654422684000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIC5jaXJjbGUtLXNpemUgew0KICAgIGZvbnQtc2l6ZTogMjVweDsNCiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICB9DQoNCiAgLm1pZGRsZS0tbGluZSB7DQogICAgaGVpZ2h0OiAxMDB2aDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBlODRmOw0KICAgIHdpZHRoOiA3MHB4Ow0KICB9DQoNCiAgLmlucHV0LS1kaXYgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICBib3R0b206IDE1cHg7DQogICAgd2lkdGg6IDQ1JTsNCiAgfQ0KDQogIC5pbnB1dC0taW5wdXQgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJvcmRlci1zdHlsZTogbm9uZTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsNCiAgICBoZWlnaHQ6IDMwcHg7DQogICAgY29sb3I6IGZsb3JhbHdoaXRlICFpbXBvcnRhbnQ7DQogIH0NCg0KICAuYmFja2dyb3VuZC0tZGl2IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmUyZTJlOw0KICB9DQoNCiAgYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgew0KICAgIGRpc3BsYXk6IG5vbmU7DQogIH0NCg=="},{"version":3,"sources":["E:\\ProgrammingLanguage\\git\\hacker_game\\src\\app\\components\\room\\RoomStart.vue"],"names":[],"mappings":";EAgYE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACrB;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACZ;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC/B;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3B;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf","file":"E:/ProgrammingLanguage/git/hacker_game/src/app/components/room/RoomStart.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div style=\"width:100%;\">\r\n    <div class=\"columns\">\r\n      <div class=\"column\" style=\"background-color: #BC3522;\">\r\n        <div\r\n          style=\"color:black; margin:30px; opacity: 50%; user-select: none;\"\r\n          class=\"box\"\r\n        >\r\n          <p>攻擊筆記</p>\r\n          <p>1. protector: 防禦。（hp +100）</p>\r\n          <p>\r\n            2. beamCannon: 光束加農砲（hp -50），若對面下木馬會變對方的\r\n          </p>\r\n          <p>3. hack: 駭入別人的，要四秒（hp -25）</p>\r\n          <p>4. horse: 木馬</p>\r\n          <p>5. worm: 不怕木馬（hp-25）</p>\r\n          <p>努力佔據更多的節點吧!!</p>\r\n          <p>假如要用防禦守住第一個節點 ex. protector 1</p>\r\n        </div>\r\n        <div\r\n          style=\"color:black; margin:30px; opacity: 40%; user-select: none; height: 40%;\"\r\n          class=\"box\"\r\n        >\r\n          <div v-for=\"memo in player1Memo\">\r\n            {{ memo }}\r\n          </div>\r\n        </div>\r\n        <div\r\n          style=\"color:white; margin:30px; opacity: 40%; user-select: none; \"\r\n        >\r\n          <span style=\"font-size:200px;\"> {{ roomItem.player1Name }}</span>\r\n        </div>\r\n\r\n        <div name=\"player1Input\" class=\"input--div\" style=\"left:1%\">\r\n          <input\r\n            class=\"input--input\"\r\n            v-if=\"redStart && inRed\"\r\n            v-on:keyup.enter=\"playerEnter(1)\"\r\n            v-model=\"player1Value\"\r\n          />\r\n          <input\r\n            class=\"input--input\"\r\n            v-if=\"!redStart || !inRed\"\r\n            style=\" background-color: gray;\"\r\n            disabled=\"true\"\r\n            v-on:keyup.enter=\"playerEnter(2)\"\r\n            v-model=\"player2Value\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <div class=\"middle--line\">\r\n          <div style=\"height:10vh\"></div>\r\n          <div>\r\n            <div\r\n              v-for=\"circle in this.roomItem.circle\"\r\n              style=\"text-align:center\"\r\n            >\r\n              <span v-if=\"!circle.owner\" class=\"circle--size\">\r\n                <i class=\"fa-regular fa-circle\">&nbsp{{ circle.id }}</i>\r\n              </span>\r\n              <span v-if=\"circle.owner == 'red'\" class=\"circle--size\">\r\n                <i class=\"fa-solid fa-circle\" style=\"color: #BC3522;\"\r\n                  >&nbsp{{ circle.id }}</i\r\n                >\r\n              </span>\r\n              <span v-if=\"circle.owner == 'blue'\" class=\"circle--size\">\r\n                <i class=\"fa-solid fa-circle\" style=\"color:#4D8EBF\"\r\n                  >&nbsp{{ circle.id }}</i\r\n                >\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"column\" style=\"background-color: #4D8EBF;\">\r\n        <div style=\"color:black; margin:30px; opacity: 50%; \" class=\"box\">\r\n          <!-- user-select: none; -->\r\n\r\n          <p>攻擊筆記</p>\r\n          <p>1. protector: 防禦。（hp +100）</p>\r\n          <p>\r\n            2. beamCannon: 光束加農砲（hp -50），若對面下木馬會變對方的\r\n          </p>\r\n          <p>3. hack: 駭入別人的，要四秒（hp -25）</p>\r\n          <p>4. horse: 木馬</p>\r\n          <p>5. worm: 不怕木馬（hp-25）</p>\r\n          <p>努力佔據更多的節點吧!!</p>\r\n          <p>假如要用防禦守住第一個節點 ex. protector 1</p>\r\n        </div>\r\n\r\n        <div\r\n          style=\"color:black; margin:30px; opacity: 40%; user-select: none; height: 40%;\"\r\n          class=\"box\"\r\n        >\r\n          <div v-for=\"memo in player2Memo\">\r\n            {{ memo }}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style=\"color:white; margin:30px; opacity: 40%; user-select: none; \"\r\n        >\r\n          <span style=\"font-size:200px;\"> {{ roomItem.player2Name }}</span>\r\n        </div>\r\n\r\n        <div name=\"player2Input\" class=\"input--div\" style=\"right:1%\">\r\n          <input\r\n            v-if=\"blueStart && inBlue\"\r\n            class=\"input--input\"\r\n            v-on:keyup.enter=\"playerEnter(2)\"\r\n            v-model=\"player2Value\"\r\n          />\r\n          <input\r\n            class=\"input--input\"\r\n            v-if=\"!blueStart || !inBlue\"\r\n            style=\" background-color: gray;\"\r\n            disabled=\"true\"\r\n            v-on:keyup.enter=\"playerEnter(2)\"\r\n            v-model=\"player2Value\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { mapGetters } from \"vuex\";\r\n\r\n  export default {\r\n    name: \"RoomStart\",\r\n    data() {\r\n      return {\r\n        player1Value: null,\r\n        player2Value: null,\r\n        roomItem: [],\r\n        redStart: false,\r\n        blueStart: false,\r\n        player1Memo: [],\r\n        player2Memo: [],\r\n        prePlayer: \"\",\r\n        inRed: false,\r\n        inBlue: false,\r\n      };\r\n    },\r\n\r\n    props: [\"roomId\"],\r\n    created() {\r\n      // 獲得玩家資訊\r\n      this.$store.dispatch(\"getPlayerItems\").then(() => {\r\n        const token = localStorage.getItem(\"token\");\r\n        this.playerItem = this.$store.getters.playerItemFromToken(token);\r\n      });\r\n\r\n      this.$store.dispatch(\"getRoomItems\").then(() => {\r\n        this.roomItem = this.$store.getters.roomItemFromId(Number(this.roomId));\r\n        // 判斷誰先手\r\n        if (this.roomItem.nowPlayer == \"red\") {\r\n          this.redStart = true;\r\n          this.prePlayer = \"red\";\r\n        } else if (this.roomItem.nowPlayer == \"blue\") {\r\n          this.blueStart = true;\r\n          this.prePlayer = \"blue\";\r\n        }\r\n\r\n        if (this.playerItem.id == this.roomItem.player1Id) {\r\n          this.inRed = true;\r\n        } else if (this.playerItem.id == this.roomItem.player2Id) {\r\n          this.inBlue = true;\r\n        }\r\n        console.log(this.inRed, this.inBlue);\r\n\r\n        this.start();\r\n      });\r\n    },\r\n    computed: {},\r\n\r\n    mounted() {},\r\n\r\n    methods: {\r\n      start() {\r\n        let that = this;\r\n        this.timer = setInterval(function() {\r\n          that.$store.dispatch(\"getRoomItems\").then(() => {\r\n            that.roomItem = that.$store.getters.roomItemFromId(\r\n              Number(that.roomId)\r\n            );\r\n\r\n            if (that.roomItem.nowPlayer != that.prePlayer) {\r\n              that.judgeWinner();\r\n              that.updatePlayer();\r\n              console.log(\r\n                \"that.redStart, that.blueStart:\",\r\n                that.redStart,\r\n                that.blueStart\r\n              );\r\n            }\r\n          });\r\n        }, 500);\r\n      },\r\n      end() {\r\n        clearInterval(this.timer);\r\n        this.timer = null; // 这里最好清除一下，回归默认值\r\n      },\r\n\r\n      playerEnter(player) {\r\n        this.$store.dispatch(\"getRoomItems\").then(() => {\r\n          this.roomItem = this.$store.getters.roomItemFromId(\r\n            Number(this.roomId)\r\n          );\r\n          this.end();\r\n\r\n          let valueList;\r\n          if (player == 1) {\r\n            valueList = this.player1Value.split(/\\s+/); // \"\\\\s+\" 是正則表示式，代表至少一個或多個空白。\r\n            this.player1Memo.push(this.player1Value);\r\n          } else if (player == 2) {\r\n            valueList = this.player2Value.split(/\\s+/); // \"\\\\s+\" 是正則表示式，代表至少一個或多個空白。\r\n            this.player2Memo.push(this.player2Value);\r\n          }\r\n\r\n          // 防禦網: 直接幫節點增加100點血量\r\n          if (valueList[0] == \"protector\") {\r\n            this.roomItem.circle[valueList[1]].hp =\r\n              this.roomItem.circle[valueList[1]].hp + 100;\r\n          }\r\n          // 光束加農砲: 每次-25 | if -> status狀態是 horse(代表有木馬程式了)\r\n          else if (\r\n            valueList[0] == \"beamCannon\" &&\r\n            !this.roomItem.circle[valueList[1]].temper\r\n          ) {\r\n            if (!this.roomItem.circle[valueList[1]].temper && player == 1) {\r\n              if (this.roomItem.circle[valueList[1]].status == \"horse\")\r\n                this.roomItem.circle[valueList[1]].temper = \"blue\";\r\n              else this.roomItem.circle[valueList[1]].temper = \"red\";\r\n              this.roomItem.circle[valueList[1]].status = \"beamCannon\";\r\n            }\r\n            if (!this.roomItem.circle[valueList[1]].temper && player == 2) {\r\n              if (this.roomItem.circle[valueList[1]].status == \"horse\")\r\n                this.roomItem.circle[valueList[1]].temper = \"red\";\r\n              else this.roomItem.circle[valueList[1]].temper = \"blue\";\r\n              this.roomItem.circle[valueList[1]].status = \"beamCannon\";\r\n            }\r\n          }\r\n          // 木馬(放入木馬後若別人用光束加農砲入入侵就會變成你的)\r\n          else if (\r\n            valueList[0] == \"horse\" &&\r\n            !this.roomItem.circle[valueList[1]].owner\r\n          ) {\r\n            this.roomItem.circle[valueList[1]].status = \"horse\";\r\n          }\r\n\r\n          // 駭入別人的 (hp-25)\r\n          else if (valueList[0] == \"hack\") {\r\n            if (this.roomItem.circle[valueList[1]].owner == \"red\") {\r\n              this.roomItem.circle[valueList[1]].status = \"hack\";\r\n              this.roomItem.circle[valueList[1]].temper = \"blue\";\r\n            } else if (this.roomItem.circle[valueList[1]].owner == \"blue\") {\r\n              this.roomItem.circle[valueList[1]].status = \"hack\";\r\n              this.roomItem.circle[valueList[1]].temper = \"red\";\r\n            }\r\n          }\r\n\r\n          // 蠕蟲(不怕木馬)\r\n          else if (\r\n            valueList[0] == \"worm\" &&\r\n            !this.roomItem.circle[valueList[1]].owner\r\n          ) {\r\n            if (player == 1) this.roomItem.circle[valueList[1]].temper = \"red\";\r\n            else if (player == 2)\r\n              this.roomItem.circle[valueList[1]].temper = \"blue\";\r\n            this.roomItem.circle[valueList[1]].status = \"worm\";\r\n          }\r\n\r\n          if (player == 1) {\r\n            this.player1Value = null;\r\n            this.roomItem.nowPlayer = \"blue\";\r\n            this.blueStart = true;\r\n            this.redStart = false;\r\n          } else if (player == 2) {\r\n            this.player2Value = null;\r\n            this.roomItem.nowPlayer = \"red\";\r\n            this.redStart = true;\r\n            this.blueStart = false;\r\n          }\r\n          console.log(this.roomItem);\r\n          this.updateBattlefield();\r\n\r\n          this.$store.dispatch(\"updateRoomStart\", this.roomItem).then(() => {\r\n            this.start();\r\n          });\r\n        });\r\n      },\r\n\r\n      judgeWinner() {\r\n        var red = 0,\r\n          blue = 0;\r\n        for (var i = 0; i < 15; i++) {\r\n          if (this.roomItem.circle[i].owner == \"red\") red = red + 1;\r\n          else if (this.roomItem.circle[i].owner == \"blue\") blue = blue + 1;\r\n        }\r\n        // 若兩邊大於15\r\n        if (red + blue >= 15) {\r\n          this.playerItem.totalGame = this.playerItem.totalGame + 1;\r\n          if (red > blue) {\r\n            this.roomItem.winner = this.roomItem.player1Id;\r\n            if (this.roomItem.player1Id == this.playerItem.id) {\r\n              this.playerItem.winGame = this.playerItem.winGame + 1;\r\n            }\r\n            this.$store\r\n              .dispatch(\"updatePlayerItem\", this.playerItem)\r\n              .then(() => {});\r\n\r\n            const deleteItem = { id: this.roomId };\r\n            this.$store.dispatch(\"removeRoomItem\", deleteItem).then(() => {});\r\n\r\n            this.$router.push({\r\n              name: \"RoomWinner\",\r\n              params: { winner: this.roomItem.player1Name },\r\n            });\r\n          } else if (blue > red) {\r\n            this.roomItem.winner = this.roomItem.player2Id;\r\n            if (this.roomItem.player2Id == this.playerItem.id) {\r\n              this.playerItem.winGame = this.playerItem.winGame + 1;\r\n            }\r\n\r\n            this.$store\r\n              .dispatch(\"updatePlayerItem\", this.playerItem)\r\n              .then(() => {});\r\n\r\n            const deleteItem = { id: this.roomId };\r\n            this.$store.dispatch(\"removeRoomItem\", deleteItem).then(() => {});\r\n\r\n            this.$router.push({\r\n              name: \"RoomWinner\",\r\n              params: { winner: this.roomItem.player2Name },\r\n            });\r\n          }\r\n        }\r\n      },\r\n\r\n      updatePlayer() {\r\n        if (this.roomItem.nowPlayer == \"red\") {\r\n          this.prePlayer = \"red\";\r\n          this.redStart = true;\r\n          this.blueStart = false;\r\n        } else if (this.roomItem.nowPlayer == \"blue\") {\r\n          this.prePlayer = \"blue\";\r\n          this.redStart = false;\r\n          this.blueStart = true;\r\n        }\r\n      },\r\n\r\n      updateBattlefield() {\r\n        for (var i = 0; i < 15; i++) {\r\n          if (this.roomItem.circle[i].status == \"beamCannon\") {\r\n            this.roomItem.circle[i].hp = this.roomItem.circle[i].hp - 50;\r\n          }\r\n\r\n          if (this.roomItem.circle[i].status == \"hack\") {\r\n            this.roomItem.circle[i].hp = this.roomItem.circle[i].hp - 25;\r\n          }\r\n\r\n          if (this.roomItem.circle[i].status == \"worm\") {\r\n            this.roomItem.circle[i].hp = this.roomItem.circle[i].hp - 25;\r\n          }\r\n\r\n          if (this.roomItem.circle[i].hp <= 0) {\r\n            this.roomItem.circle[i].owner = this.roomItem.circle[i].temper;\r\n          }\r\n        }\r\n      },\r\n    },\r\n\r\n    beforeUnmount() {\r\n      clearInterval(this.timer);\r\n    },\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .circle--size {\r\n    font-size: 25px;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .middle--line {\r\n    height: 100vh;\r\n    background-color: #f0e84f;\r\n    width: 70px;\r\n  }\r\n\r\n  .input--div {\r\n    position: absolute;\r\n    bottom: 15px;\r\n    width: 45%;\r\n  }\r\n\r\n  .input--input {\r\n    width: 100%;\r\n    border-style: none;\r\n    background-color: black;\r\n    height: 30px;\r\n    color: floralwhite !important;\r\n  }\r\n\r\n  .background--div {\r\n    background-color: #2e2e2e;\r\n  }\r\n\r\n  body::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n</style>\r\n"]}]}